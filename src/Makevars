PKG_CPPFLAGS = -Ilibcmaes/include
PKG_LIBS = libcmaes/build/src/libcmaes.a

$(SHLIB): $(PKG_LIBS)

$(PKG_LIBS):
	(cd libcmaes; \
	  CC="$(CC)" CFLAGS="$(CFLAGS)" \
	  CPPFLAGS="$(CPPFLAGS)" LDFLAGS="$(LDFLAGS)" \
	  cmake -S . -B build \
	    -DLIBCMAES_BUILD_SHARED_LIBS=OFF \
	    -DLIBCMAES_BUILD_PYTHON=OFF \
	    -DLIBCMAES_BUILD_EXAMPLES=OFF \
	    -DLIBCMAES_ENABLE_SURROG=OFF \
	    -DCMAKE_BUILD_TYPE=Release; \
	  $(MAKE) -C build)



